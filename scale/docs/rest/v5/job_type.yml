openapi: "3.0.0"
info:
  title: Job Type Services
  version: v5

paths: 
  /job-types/:
    get:
      tags:
        - Job Type Services
      summary: Job Type List
      description: Returns a list of all job types.
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: The page of the results to return.
        - in: query
          name: page_size
          schema:
            type: integer
            default: 100
          description: The size of the page to use for pagination of results.
            Defaults to 100, and can be anywhere from 1-1000.
        - in: query
          name: started
          schema:
            type: string
            format: date-time
          description: The start of the time range to query
        - in: query
          name: ended
          schema:
            type: string
            format: date-time
          description: End of the time range to query, defaults to the current time
        - in: query
          name: name
          schema:
            type: string
          description: Return only job types with a given name.
            Duplicate it to filter by multiple values.
        - in: query
          name: category
          schema:
            type: string
          description: Return only job types with a given category.
            Duplicate it to filter by multiple values.
        - in: query
          name: is_active
          schema:
            type: boolean
            default: true
          description: Return only job types that are active (True) or inactive (False).
            Defaults to only active job types
        - in: query
          name: is_operational
          schema:
            type: boolean
            default: false
          description: Return only job types that are operational (True) or still in a
            research & development (R&D) phase (False). Defaults to all.
        - in: query
          name: order
          schema:
            type: string
          description: "One or more fields to use when ordering the results.
            Duplicate it to multi-sort, (ex: order=host_name&order=created)
            Prefix fields with a dash to reverse the sort, (ex: order=-created)"
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_list'

    post:
      tags:
        - Job Type Services
      summary: Create Job Type
      description: Creates a new job type with associated interface and error mapping
      parameters:
        - in: query
          required: true
          schema:
            type: string
          name: name
          description: The identifying name of job type used for queries.
          example: new-job-type
        - in: query
          required: true
          name: version
          schema:
            type: string
          description: The version of the job type.
          example: 1.0.0
        - in: query
          name: title
          schema:
            type: string
          description: The human-readable name of the job type.
          example: New Job Type
        - in: query
          name: description
          schema:
            type: string
          description: An optional description of the job type.
        - in: query
          name: category
          schema:
            type: string
          description: An optional overall category of the job type.
        - in: query
          name: author_name
          schema:
            type: string
          description: The name of the person or organization that created the
            algorithm associated with the job type.
        - in: query
          name: author_url
          schema:
            type: string
          description: The address to a home page about the author or associated
            algorithm run by the job type.
        - in: query
          name: is_operational
          schema:
            type: boolean
          description:  Whether this job type is operational (True) or is still in a 
            research & development (R&D) phase (False).
        - in: query
          name: is_paused
          schema:
            type: boolean
          description: Whether the job type is paused (while paused no jobs of this
            type will be scheduled off of the queue).
        - in: query
          name: icon_code
          schema:
            type: string
          description: A font-awesome icon code to use when displaying this job type.
        - in: query
          name: docker_image
          schema:
            type: string
          description: The Docker image containing the code to run for this job.
        - in: query
          name: priority
          schema:
            type: integer
          description: The priority of the job type (lower number is higher priority).
        - in: query
          name: timeout
          schema:
            type: integer
          description: The maximum amount of time to allow a job of this type to run
            before being killed (in seconds).
        - in: query
          name: max_scheduled
          schema:
            type: integer
          description: Indicates the maximum number of jobs of this type that may be
            scheduled to run at the same time.
        - in: query
          name: max_tries
          schema:
            type: integer
          description: The maximum number of times to try executing a job when failed.
        - in: query
          name: cpus_required
          schema:
            type: number
          description: The number of CPUs needed for a job of this type.
        - in: query
          name: mem_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_const_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of the input files
            to determine additional memory in MiB required for a job of this type.
        - in: query
          name: shared_mem_required
          schema:
            type: number
          description: The amount of shared memory (/dev/shm) in MiB needed for a job
            of this type.
        - in: query
          name: disk_out_const_required
          schema:
            type: number
          description: A constant amount of disk space in MiB required for job output.
        - in: query
          name: disk_out_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of input files to
            determine additional disk space in MiB required for job output.
        - in: query
          name: interface
          schema:
            $ref: '#/components/schemas/interface'
          description: JSON description of the interface for running the job.
        - in: query
          name: configuration
          schema:
            $ref: '#/components/schemas/configuration'
          description: JSON description of the configuration for running the job.
        - in: query
          name: custom_resources
          schema:
            $ref: '#/components/schemas/custom_resources'
          description: JSON description for any custom resources needed for running a 
            job of this type.
        - in: query
          name: error_mapping
          schema:
            $ref: '#/components/schemas/error_mapping'
          description: JSON description that maps exit codes to known error models.
        - in: query
          name: trigger_rule
          schema:
            $ref: '#/components/schemas/trigger_rule'
          description: A linked trigger rule that automatically invokes the job type.
            Type and configuration fields are required if setting a rule.
            The is_active field is optional and can be used to pause.
      responses:
        '201':
          description: OK - created
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_details'

  /job-types/validation/:
    post:
      tags:
        - Job Type Services
      summary: Validate Job Type
      description: Validates a new job type without actually saving it
      parameters:
        - in: query
          required: true
          schema:
            type: string
          name: name
          description: The identifying name of job type used for queries.
          example: new-job-type
        - in: query
          required: true
          name: version
          schema:
            type: string
          description: The version of the job type.
          example: 1.0.0
        - in: query
          name: title
          schema:
            type: string
          description: The human-readable name of the job type.
          example: New Job Type
        - in: query
          name: description
          schema:
            type: string
          description: An optional description of the job type.
        - in: query
          name: category
          schema:
            type: string
          description: An optional overall category of the job type.
        - in: query
          name: author_name
          schema:
            type: string
          description: The name of the person or organization that created the
            algorithm associated with the job type.
        - in: query
          name: author_url
          schema:
            type: string
          description: The address to a home page about the author or associated
            algorithm run by the job type.
        - in: query
          name: is_operational
          schema:
            type: boolean
          description:  Whether this job type is operational (True) or is still in a 
            research & development (R&D) phase (False).
        - in: query
          name: is_paused
          schema:
            type: boolean
          description: Whether the job type is paused (while paused no jobs of this
            type will be scheduled off of the queue).
        - in: query
          name: icon_code
          schema:
            type: string
          description: A font-awesome icon code to use when displaying this job type.
        - in: query
          name: docker_image
          schema:
            type: string
          description: The Docker image containing the code to run for this job.
        - in: query
          name: priority
          schema:
            type: integer
          description: The priority of the job type (lower number is higher priority).
        - in: query
          name: timeout
          schema:
            type: integer
          description: The maximum amount of time to allow a job of this type to run
            before being killed (in seconds).
        - in: query
          name: max_scheduled
          schema:
            type: integer
          description: Indicates the maximum number of jobs of this type that may be
            scheduled to run at the same time.
        - in: query
          name: max_tries
          schema:
            type: integer
          description: The maximum number of times to try executing a job when failed.
        - in: query
          name: cpus_required
          schema:
            type: number
          description: The number of CPUs needed for a job of this type.
        - in: query
          name: mem_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_const_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of the input files
            to determine additional memory in MiB required for a job of this type.
        - in: query
          name: shared_mem_required
          schema:
            type: number
          description: The amount of shared memory (/dev/shm) in MiB needed for a job
            of this type.
        - in: query
          name: disk_out_const_required
          schema:
            type: number
          description: A constant amount of disk space in MiB required for job output.
        - in: query
          name: disk_out_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of input files to
            determine additional disk space in MiB required for job output.
        - in: query
          name: interface
          schema:
            $ref: '#/components/schemas/interface'
          description: JSON description of the interface for running the job.
        - in: query
          name: configuration
          schema:
            $ref: '#/components/schemas/configuration'
          description: JSON description of the configuration for running the job.
        - in: query
          name: custom_resources
          schema:
            $ref: '#/components/schemas/custom_resources'
          description: JSON description for any custom resources needed for running a 
            job of this type.
        - in: query
          name: error_mapping
          schema:
            $ref: '#/components/schemas/error_mapping'
          description: JSON description that maps exit codes to known error models.
        - in: query
          name: trigger_rule
          schema:
            $ref: '#/components/schemas/trigger_rule'
          description: A linked trigger rule that automatically invokes the job type.
            Type and configuration fields are required if setting a rule.
            The is_active field is optional and can be used to pause.
      responses:
        '200':
          description: OK - accepted
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_validation'

  /job-types/{id}/:
    get:
      tags:
        - Job Type Services
      summary: Job Type List
      description: Returns a list of all job types.
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: integer
          description: The ID of the job type to request details of.
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_details'

    patch:
      tags:
        - Job Type Services
      summary: Edit Job Type
      description: Edits an existing job type with associated interface and error mapping
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: integer
          description: The ID of the job type to edit.
        - in: query
          name: title
          schema:
            type: string
          description: The human-readable name of the job type.
          example: New Job Type
        - in: query
          name: description
          schema:
            type: string
          description: An optional description of the job type.
        - in: query
          name: category
          schema:
            type: string
          description: An optional overall category of the job type.
        - in: query
          name: author_name
          schema:
            type: string
          description: The name of the person or organization that created the
            algorithm associated with the job type.
        - in: query
          name: author_url
          schema:
            type: string
          description: The address to a home page about the author or associated
            algorithm run by the job type.
        - in: query
          name: is_operational
          schema:
            type: boolean
          description:  Whether this job type is operational (True) or is still in a 
            research & development (R&D) phase (False).
        - in: query
          name: is_paused
          schema:
            type: boolean
          description: Whether the job type is paused (while paused no jobs of this
            type will be scheduled off of the queue).
        - in: query
          name: icon_code
          schema:
            type: string
          description: A font-awesome icon code to use when displaying this job type.
        - in: query
          name: docker_image
          schema:
            type: string
          description: The Docker image containing the code to run for this job.
        - in: query
          name: priority
          schema:
            type: integer
          description: The priority of the job type (lower number is higher priority).
        - in: query
          name: timeout
          schema:
            type: integer
          description: The maximum amount of time to allow a job of this type to run
            before being killed (in seconds).
        - in: query
          name: max_scheduled
          schema:
            type: integer
          description: Indicates the maximum number of jobs of this type that may be
            scheduled to run at the same time.
        - in: query
          name: max_tries
          schema:
            type: integer
          description: The maximum number of times to try executing a job when failed.
        - in: query
          name: cpus_required
          schema:
            type: number
          description: The number of CPUs needed for a job of this type.
        - in: query
          name: mem_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_const_required
          schema:
            type: number
          description: A constant amount of memory in MiB required for a job of this
            type.
        - in: query
          name: mem_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of the input files
            to determine additional memory in MiB required for a job of this type.
        - in: query
          name: shared_mem_required
          schema:
            type: number
          description: The amount of shared memory (/dev/shm) in MiB needed for a job
            of this type.
        - in: query
          name: disk_out_const_required
          schema:
            type: number
          description: A constant amount of disk space in MiB required for job output.
        - in: query
          name: disk_out_mult_required
          schema:
            type: number
          description: A multiplier (2x = 2.0) applied to the size of input files to
            determine additional disk space in MiB required for job output.
        - in: query
          name: interface
          schema:
            $ref: '#/components/schemas/interface'
          description: JSON description of the interface for running the job.
        - in: query
          name: configuration
          schema:
            $ref: '#/components/schemas/configuration'
          description: JSON description of the configuration for running the job.
        - in: query
          name: custom_resources
          schema:
            $ref: '#/components/schemas/custom_resources'
          description: JSON description for any custom resources needed for running a 
            job of this type.
        - in: query
          name: error_mapping
          schema:
            $ref: '#/components/schemas/error_mapping'
          description: JSON description that maps exit codes to known error models.
        - in: query
          name: trigger_rule
          schema:
            $ref: '#/components/schemas/trigger_rule'
          description: A linked trigger rule that automatically invokes the job type.
            Type and configuration fields are required if setting a rule.
            The is_active field is optional and can be used to pause.
      responses:
        '200':
          description: OK - edited
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_details'

  /job-types/status/:
    get:
      tags:
        - Job Type Status
      summary: Edit Job Type
      description: Returns a list of overall job type statistics, based on counts of jobs organized by status.
        Note that all jobs with a status of RUNNING are included regardless of date/time filters.
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: The page of the results to return.
        - in: query
          name: page_size
          schema:
            type: integer
            default: 100
          description: The size of the page to use for pagination of results.
            Defaults to 100, and can be anywhere from 1-1000.
        - in: query
          name: started
          schema:
            type: string
            format: date-time
          description: The start of the time range to query
        - in: query
          name: ended
          schema:
            type: string
            format: date-time
          description: End of the time range to query, defaults to the current time
        - in: query
          name: is_operational
          schema:
            type: boolean
          description: Return only job types that are operational (True) or still in a
            research & development (R&D) phase (False).
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_status_list'

  /job-types/pending/:
    get:
      tags:
        - Job Type Status
      summary: Pending Job Types
      description: Returns counts of job types that are pending, ordered by the longest pending job.
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_pending_list'

  /job-types/running/:
    get:
      tags:
        - Job Type Status
      summary: Running Job Types
      description: Returns counts of job types that are running, ordered by the longest running job.
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_running_list'

  /job-types/system-failures/:
    get:
      tags:
        - Job Type Status
      summary: Job Type System Failures
      description: Returns counts of job types that have a critical system failure error, ordered by last error.
      responses:
        '200':
          description: OK - indicates a successful event
          content:
            application/json: 
              schema:
                $ref: '#/components/schemas/job_type_failure_list'


components:
  schemas:
    job_type_base:
      title: Job Type Base
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier of the model.
          example: 1
        name:
          type: string
          description: The identifying name of the job type used for queries.
          example: my_job_type
        version:
          type: string
          description: The version of the job type.
          example: 1.0.0
        title:
          type: string
          description: The human readable display name of the job type.
          example: My Job Type
        description:
          type: string
          description: A longer description of the job type.
          example: A cool description of my job type.
        category:
          type: string
          description: An optional overall category of the job type.
          example: system
        author_name:
          type: string
          description: The POC for this job type.
          example: Scale D. Veloper
        author_url:
          type: string
          description: A url related to the job type author.
          example: www.somesite.gov
        is_system:
          type: boolean
          description: Whether this is a system type.
          example: True
        is_long_running:
          type: boolean
          description: Whether this type is long running. A job of this type is intended to run
            for a long time, potentially indefinitely, without timing out and always 
            being re-queued after a failure
          example: False
        is_active:
          type: boolean
          description: Whether the job type is active (false once job type is archived). 
          example: True
        is_operational:
          type: boolean
          description: Whether this job type is operational (True) or is still in a research &
            development (R&D) phase (False).
          example: True
        is_paused:
          type: boolean
          description: Whether the job type is paused (while paused no jobs of this type will be
            scheduled off of the queue).
          example: False
        icon_code:
          type: string
          description: A font-awesome icon code to use when representing this job type.
          example: f0f4

    job_type:
      title: Job Type
      allOf:
        - $ref: '#/components/schemas/job_type_base'
        - type: object 
          properties:
            uses_docker:
              type: boolean
              description: Whether the job type uses Docker.
              example: true
            docker_privileged:
              type: boolean
              description: Whether this job runs in privileged mode.
              example: false
            docker_image:
              type: string
              description: The Docker image containing the code to run for this job.
              example: google/golang-hello
            revision_num:
              type: integer
              description: The current revision number of the job type, incremented for each edit.
              example: 2
            priority:
              type: integer
              description: The priority of the job type (lower number is higher priority).
              example: 200
            max_scheduled:
              type: integer
              description: An optional number indicating the maximum number of jobs of this type
                that may be scheduled to run at the same time. May be 'null'.
              example: 10
            timeout:
              type: integer
              description: The maximum amount of time to allow a job of this type to run
                before being killed (in seconds).
              example: 10
            max_tries:
              type: integer
              description: The maximum number of times to try executing a job in case of errors.
              example: 3
            cpus_required:
              type: number
              description: The number of CPUs needed for a job of this type.
              example: 2.0
            mem_required:
              type: number
              description: A constant amount of memory in MiB required for a job of this type.
              example: 128.0
            mem_const_required:
              type: number
              description: A constant amount of memory in MiB required for a job of this type.
              example: 128.0
            mem_mult_required:
              type: number
              description: A multiplier (2x = 2.0) applied to the size of the input files to
                determine additional memory in MiB required for a job of this type.
              example: 2.0
            shared_mem_required:
              type: number
              description: The amount of shared memory (/dev/shm) in MiB needed for a job of this type.
              example: 128.0
            disk_out_const_required:
              type: number
              description: A constant amount of disk space in MiB required for job output.
              example: 100.0
            disk_out_mult_required:
              type: number
              description: A multiplier (2x = 2.0) applied to the size of the input files to
                determine additional disk space in MiB required for job output.
              example: 2.5
            created:
              type: string
              format: date-time
              description: When the associated database model was initially created.
              example: 2015-09-10T15:24:53.503Z
            archived:
              type: string
              format: date-time
              description: When the job type was archived (no longer active).
              example: 2015-09-10T15:24:53.503Z
            paused:
              type: string
              format: date-time
              description: When the job type was paused.
              example: 2015-09-10T15:24:53.503Z
            last_modified:
              type: string
              format: date-time
              description: When the associated database model was last saved.
              example: 2015-09-10T15:24:53.503Z

    job_type_details:
      title: Job Type Details
      allOf:
        - $ref: '#/components/schemas/job_type'
        - type: object 
          properties:
            interface:
              $ref: '#/components/schemas/interface'
            configuration:
              $ref: '#/components/schemas/configuration'
            custom_resources:
              $ref: '#/components/schemas/custom_resources'
            error_mapping:
              $ref: '#/components/schemas/error_mapping'
            errors:
              type: array
              items:
                $ref: '#/components/schemas/error_details'
            job_counts_6h:
              type: array
              items: 
                $ref: '#/components/schemas/counts_object'
            job_counts_12h:
              type: array
              items: 
                $ref: '#/components/schemas/counts_object'
            job_counts_24h:
              type: array
              items: 
                $ref: '#/components/schemas/counts_object'

    job_type_list:
      title: Job Type List
      type: object
      properties:
        count:
          type: integer
          description: The total number of results that match the query parameters 
          example: 10
        next:
          type: string
          format: uri
          description: A URL to the next page of results.
          example: null
        previous:
          type: string
          format: uri
          description: A URL to the previous page of results.
          example: null
        results:
          type: array
          items:
            $ref: '#/components/schemas/job_type'
          description: List of job types.

    job_type_rev_base:
      title: Job Type Revision Base
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier of the model.
          example: 1
        job_type:
          $ref: '#/components/schemas/model_id'
        revision_num:
          type: integer
          description: The revision version of the job type
          example: 1

    job_type_rev:
      title: Job Type Revision
      allOf:
        - $ref: '#/components/schemas/job_type_rev_base'
        - type: object
          properties:
            interface:
              type: integer
              description: The unique identifier of the model.
              example: 1
            created:
              type: string
              format: date-time
              description:  When the job_type revision was created.
              example: 2015-09-10T15:24:53.503Z

    trigger_event_base:
      title: Trigger Event Base
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier of the model.
          example: 1
        is_active:
          type: boolean
          description: Whether this trigger is currently active. 
          example: true
        type:
          type: string
          description:  The type of event
          example: PARSE
        rule:
          $ref: '#/components/schemas/model_id'
        occurered:
          type: string
          format: date-time
          description:  When the trigger event occurred.
          example: 2015-09-10T15:24:53.503Z

    trigger_event_details:
      title: Trigger Event Details
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier of the model.
          example: 1
        is_active:
          type: boolean
          description: Whether this trigger is currently active. 
          example: true
        type:
          type: string
          description:  The type of event
          example: PARSE
        rule:
          type: object
          properties:
            configuration:
              $ref: '#/components/schemas/configuration'
        occurered:
          type: string
          format: date-time
          description:  When the trigger event occurred.
          example: 2015-09-10T15:24:53.503Z

    trigger_rule:
      title: Trigger Rule
      type: object
      properties:
        type:
          type: string
          description:  The type of rule
          example: PARSE
        is_active:
          type: boolean
          description: Whether this trigger is currently active. 
          example: true
        configuration:
          type: object
          description: Config for the rule.
          properties:
            version:
              type: string
              example: "1.0"
            condition:
              type: object
              properties:
                media_type: 
                  type: string
                  description: The file media types to trigger on
                  example: 'image/png'
                data_types:
                  type: array
                  items:
                    type: string
                  description: The data types to trigger on. 
            data:
              type: object
              properties:
                input_data_name:
                  type: string
                  description: The input_data_name to populate.
                  example: input_file
                workspace_name:
                  type: string
                  description: The name of the workspace.
                  example: raw

    interface:
      title: Interface
      type: object
      properties:
        version:
          type: string
          example: "2.0"
        command:
          type: string
          example: test_cmd
        command_arguments:
          type: string
          example: "test_arg ${dted_path}"
        input_data:
          type: array
          items:
            type: object
            properties:
              media_types:
                type: integer
              type: 
                type: string
                example: file
              name:
                type: string
                example: test_file
        settings:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: dted_path
              required:
                type: boolean
                example: false
              secret:
                type: boolean
                example: false
        mounts:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: ref_data
              required:
                type: boolean
                example: true
              path:
                type: string
                example: /container/path/to/ref_data
              mode:
                type: string
                example: ro
        output_data:
          type: array
          items: 
            example: []
          example: [...]
        shared_resources:
          type: array
          items: 
            example: []
          example: [...]

    configuration:
      title: Configuration
      type: object
      properties:
        version:
          type: string
          example: "2.0"
        mounts:
          type: object
          properties:
            ref_data:
              type: object
              properties:
                type:
                  type: string
                  example: host
                host_path:
                  type: string
                  example: /path/to/ref_data
        settings:
          type: object
          properties:
            dted_path:
              type: string
              example: /path/to/dted

    custom_resources:
      title: Custom Resources
      type: object
      properties:
        version:
          type: string
          example: "2.0"
        resources:
          type: object
          properties:
            foo: 
              type: number
              example: 10.0

    error_mapping:
      title: Error Mapping
      type: object
      properties:
        version:
          type: string
          example: "2.0"
        exit_codes:
          type: object
          properties:
            1:
              type: string
              example: unkonwn

    job_type_validation:
      title: Job Type Validation
      type: object
      properties:
        warnings:
          type: array
          items:
            $ref: '#/components/schemas/validation_warning'

    counts_object:
      title: Counts
      type: object
      properties:
        status:
          type: string
          example: COMPLETED
          description: The status for these counts.
        count:
          type: integer
          example: 45
          description: The number of jobs with the given status in the given time period.
        most_recent:
          type: string
          format: date-time
          example: 2015-09-10T15:24:53.503Z
          description: The last time this status was seen.
        category:
          type: string
          example: SYSTEM
          description: The category for the status (if any).

    job_type_status_list:
      title: Job Type Status List
      type: object
      properties:
        count:
          type: integer
          description: The total number of results that match the query parameters 
          example: 10
        next:
          type: string
          format: uri
          description: A URL to the next page of results.
          example: null
        previous:
          type: string
          format: uri
          description: A URL to the previous page of results.
          example: null
        results:
          type: array
          items:
            $ref: '#/components/schemas/job_type_status'
          description: List of job types sorted by status.

    job_type_status:
      title: Job Type Status
      type: object
      properties:
        job_type:
          $ref: '#/components/schemas/job_type_base'
        job_counts:
          type: array
          items:
            $ref: '#/components/schemas/counts_object'

    job_type_pending_list:
      title: Pending Job Types List
      type: object
      properties:
        count:
          type: integer
          description: The total number of results that match the query parameters 
          example: 10
        next:
          type: string
          format: uri
          description: A URL to the next page of results.
          example: null
        previous:
          type: string
          format: uri
          description: A URL to the previous page of results.
          example: null
        results:
          type: array
          items:
            $ref: '#/components/schemas/job_type_pending'
          description: List of job types with pending jobs.

    job_type_pending:
      title: Pending Job Type
      type: object
      properties:
        job_type:
          $ref: '#/components/schemas/job_type_base'
        count:
          type: integer
          description: The number of jobs of this type that are currently pending.
          example: 4
        longest_pending:
          type: string
          format: date-time
          description: The queue start time of the job of this type that has been pending the longest.
          example: 2015-09-10T15:24:53.503Z

    job_type_running_list:
      title: Running Job Types List
      type: object
      properties:
        count:
          type: integer
          description: The total number of results that match the query parameters 
          example: 10
        next:
          type: string
          format: uri
          description: A URL to the next page of results.
          example: null
        previous:
          type: string
          format: uri
          description: A URL to the previous page of results.
          example: null
        results:
          type: array
          items:
            $ref: '#/components/schemas/job_type_running'
          description: List of job types with running jobs.

    job_type_running:
      title: Running Job Type
      type: object
      properties:
        job_type:
          $ref: '#/components/schemas/job_type_base'
        count:
          type: integer
          description: The number of jobs of this type that are currently running.
          example: 4
        longest_pending:
          type: string
          format: date-time
          description: The run start time of the job of this type that has been running the longest.
          example: 2015-09-10T15:24:53.503Z

    job_type_failure_list:
      title: Job Types Failures List
      type: object
      properties:
        count:
          type: integer
          description: The total number of results that match the query parameters 
          example: 10
        next:
          type: string
          format: uri
          description: A URL to the next page of results.
          example: null
        previous:
          type: string
          format: uri
          description: A URL to the previous page of results.
          example: null
        results:
          type: array
          items:
            $ref: '#/components/schemas/job_type_failure'
          description: List of job type failures.

    job_type_failure:
      title: Job Type Failures
      type: object
      properties:
        job_type:
          $ref: '#/components/schemas/job_type_base'
        error:
          $ref: '#/components/schemas/error_details'
        count:
          type: integer
          description: The number of jobs of this type that failed.
          example: 4
        first_error:
          type: string
          format: date-time
          description: When this error first occurred for a job of this type.
          example: 2015-09-10T15:24:53.503Z
        last_error:
          type: string
          format: date-time
          description: When this error most recently occurred for a job of this type.
          example: 2015-09-10T15:24:53.503Z