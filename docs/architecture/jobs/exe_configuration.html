

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Execution Configuration &mdash; Scale 5.4.0-snapshot documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Scale 5.4.0-snapshot documentation" href="../../index.html"/>
        <link rel="up" title="Jobs and Recipes" href="index.html"/>
        <link rel="next" title="Recipe Definition" href="recipe_definition.html"/>
        <link rel="prev" title="Job Data" href="job_data.html"/>
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Scale
          

          
            
            <img src="../../_static/scale3-transparent-128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                5.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Command Line Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithm_integration/index.html">Algorithm Integration into Scale</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Jobs and Recipes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="batch_definition.html">Batch Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="error_interface.html">Errors Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="job_interface.html">Job Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="job_configuration.html">Job Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="job_data.html">Job Data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Execution Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#execution-configuration-specification-version-2-0">Execution Configuration Specification Version 2.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="recipe_definition.html">Recipe Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="recipe_data.html">Recipe Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="task_results.html">Task Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logs.html">ElasticSearch Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../messaging.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../port.html">Import/Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scan.html">Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strike.html">Strike</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspaces.html">Workspaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../django/index.html">Django/Code Base</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rest/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Scale</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Architecture</a> &raquo;</li>
        
          <li><a href="index.html">Jobs and Recipes</a> &raquo;</li>
        
      <li>Execution Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/architecture/jobs/exe_configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="execution-configuration">
<span id="architecture-jobs-exe-configuration"></span><h1>Execution Configuration<a class="headerlink" href="#execution-configuration" title="Permalink to this headline">¶</a></h1>
<p>The execution configuration is a JSON document that defines the configuration with which a specific job execution will
run. This configuration includes information such as Docker parameters required by the job execution&#8217;s Docker container.
This JSON schema is used internally by the Scale system and is not exposed through the REST API.</p>
<div class="section" id="execution-configuration-specification-version-2-0">
<span id="architecture-jobs-exe-configuration-spec"></span><h2>Execution Configuration Specification Version 2.0<a class="headerlink" href="#execution-configuration-specification-version-2-0" title="Permalink to this headline">¶</a></h2>
<p>A valid execution configuration is a JSON document with the following structure:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
   <span class="s2">&quot;input_files&quot;</span><span class="o">:</span> <span class="p">[{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="nx">INTEGER</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;workspace_name&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;workspace_path&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;local_file_name&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;is_deleted&quot;</span><span class="o">:</span> <span class="nx">BOOLEAN</span>
   <span class="p">}],</span>
   <span class="s2">&quot;output_workspaces&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">},</span>
   <span class="s2">&quot;tasks&quot;</span><span class="o">:</span> <span class="p">[{</span>
      <span class="s2">&quot;task_id&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;resources&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">FLOAT</span><span class="p">},</span>
      <span class="s2">&quot;args&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
      <span class="s2">&quot;env_vars&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">},</span>
      <span class="s2">&quot;workspaces&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;volume_name&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">}},</span>
      <span class="s2">&quot;mounts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">},</span>
      <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">},</span>
      <span class="s2">&quot;volumes&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;container_path&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;host_path&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
                           <span class="s2">&quot;driver&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;driver_opts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">}}},</span>
      <span class="s2">&quot;docker_params&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;flag&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">}]</span>
   <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>version</strong>: JSON string</p>
<blockquote>
<div><p>The <em>version</em> is an optional string value that defines the version of the configuration specification used. This
allows updates to be made to the specification while maintaining backwards compatibility by allowing Scale to
recognize an older version and convert it to the current version. The default value for <em>version</em> if it is not
included is the latest version, which is currently 2.0.</p>
<p>Scale must recognize the version number as valid for the job to work. Valid execution configuration versions are
<code class="docutils literal"><span class="pre">&quot;1.0&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;1.1&quot;</span></code>, and <code class="docutils literal"><span class="pre">&quot;2.0&quot;</span></code>.</p>
</div></blockquote>
<p><strong>input_files</strong>: JSON array</p>
<blockquote>
<div><p>The <em>input_files</em> field is an optional JSON array of objects that describe each input file for the execution. Each
input file object has the following fields:</p>
<p><strong>id</strong>: JSON number</p>
<blockquote>
<div>The <em>id</em> field is a required integer defining the unique Scale ID of the input file.</div></blockquote>
<p><strong>type</strong>: JSON string</p>
<blockquote>
<div>The <em>type</em> field is a required string defining the type of the input file and has only two valid values:
&#8220;SOURCE&#8221; or &#8220;PRODUCT&#8221;.</div></blockquote>
<p><strong>workspace_name</strong>: JSON string</p>
<blockquote>
<div>The <em>workspace_name</em> field is a required string containing the name of the workspace that holds the input file.</div></blockquote>
<p><strong>workspace_path</strong>: JSON string</p>
<blockquote>
<div>The <em>workspace_path</em> field is a required string containing the path within the workspace where the input file
resides.</div></blockquote>
<p><strong>local_file_name</strong>: JSON string</p>
<blockquote>
<div>The <em>local_file_name</em> field is an optional string describing an alternate file name to use when passing the
input file to the executing container. This is used to deconflict identical input file names when multiple files
with the same name are passed to the same input.</div></blockquote>
<p><strong>is_deleted</strong>: JSON boolean</p>
<blockquote>
<div>The <em>is_deleted</em> field is a required boolean indicating whether the input file has been deleted or not.</div></blockquote>
</div></blockquote>
<p><strong>output_workspaces</strong>: JSON object</p>
<blockquote>
<div>The <em>output_workspaces</em> field is an optional JSON object where the keys are the names of the job&#8217;s output parameters
and each corresponding value is the name of the workspace that should be used to store that output&#8217;s files.</div></blockquote>
<p><strong>tasks</strong>: JSON array</p>
<blockquote>
<div><p>The <em>tasks</em> field is an optional JSON array of objects that describe each task in the execution. Each task object
has the following fields:</p>
<p><strong>task_id</strong>: JSON string</p>
<blockquote>
<div>The <em>task_id</em> field is an optional string defining the unique Scale ID for the task.</div></blockquote>
<p><strong>type</strong>: JSON string</p>
<blockquote>
<div>The <em>type</em> field is a required string defining the type of the task and only has the following valid values:
&#8220;pull&#8221;, &#8220;pre&#8221;, &#8220;main&#8221;, or &#8220;post&#8221;.</div></blockquote>
<p><strong>resources</strong>: JSON object</p>
<blockquote>
<div>The <em>resources</em> field is an optional object where each key is the name of a resource and each corresponding
value is the floating point amount of that resource that was provided for the task to run.</div></blockquote>
<p><strong>args</strong>: JSON string</p>
<blockquote>
<div>The <em>args</em> field is a required string describing the command arguments that will be passed to the task.</div></blockquote>
<p><strong>env_vars</strong>: JSON object</p>
<blockquote>
<div>The <em>env_vars</em> field is an optional object where each key is the name of an environment variable and each
corresponding value is the value passed to that environment variable.</div></blockquote>
<p><strong>workspaces</strong>: JSON object</p>
<blockquote>
<div><p>The <em>workspaces</em> field is an optional object where each key is the name of a workspace needed by the task and
each corresponding value is an object with the following fields:</p>
<p><strong>mode</strong>: JSON string</p>
<blockquote>
<div>The <em>mode</em> is a required string describing in what mode the workspace will be used. There are two valid
values: &#8220;ro&#8221; for read-only mode and &#8220;rw&#8221; for read-write mode.</div></blockquote>
<p><strong>volume_name</strong>: JSON string</p>
<blockquote>
<div>The <em>volume_name</em> is an optional string containing the name of Docker volume that will be mounted into the
task&#8217;s container in order to make the workspace available.</div></blockquote>
</div></blockquote>
<p><strong>mounts</strong>: JSON object</p>
<blockquote>
<div>The <em>mounts</em> field is an optional object where each key is the name of a mount and each corresponding value
is the name of the Docker volume that will be mounted into the task&#8217;s container. A null value indicates a
required mount that was not provided.</div></blockquote>
<p><strong>settings</strong>: JSON object</p>
<blockquote>
<div>The <em>settings</em> field is an optional object where each key is the name of a setting and each corresponding value
is the value passed to that setting. A null value indicates a required setting that was not provided.</div></blockquote>
<p><strong>volumes</strong>: JSON object</p>
<blockquote>
<div><p>The <em>volumes</em> field is an optional object where each key is the name of a Docker volume being mounted into the
task and each corresponding value is an object with the following fields:</p>
<p><strong>container_path</strong>: JSON string</p>
<blockquote>
<div>The <em>container_path</em> field is a required string describing the path within the container onto which the
volume will be mounted.</div></blockquote>
<p><strong>mode</strong>: JSON string</p>
<blockquote>
<div>The <em>mode</em> field is a required string describing in what mode the volume will be mounted. There are two
valid values: &#8220;ro&#8221; for read-only mode and &#8220;rw&#8221; for read-write mode.</div></blockquote>
<p><strong>type</strong>: JSON string</p>
<blockquote>
<div>The <em>type</em> field is a required string specifying the type of the volume and has only two valid values:
&#8220;volume&#8221; for normal Docker volume mounts and &#8220;host&#8221; for Docker host path mounts.</div></blockquote>
<p><strong>host_path</strong>: JSON string</p>
<blockquote>
<div>The <em>host_path</em> field is an optional string describing the path on the host machine that should be mounted
into the container. This field should only be specified when <em>type</em> is &#8220;host&#8221;.</div></blockquote>
<p><strong>driver</strong>: JSON string</p>
<blockquote>
<div>The <em>driver</em> field is an optional string describing a custom Docker volume driver to use for the volume.
This field should only be specified when <em>type</em> is &#8220;volume&#8221;.</div></blockquote>
<p><strong>driver_opts</strong>: JSON object</p>
<blockquote>
<div>The <em>driver_opts</em> field is an optional object where each key/value pair represents the name and value of a
Docker volume driver argument option that should be passed to the volume driver. This field should only be
specified when <em>type</em> is &#8220;volume&#8221;.</div></blockquote>
</div></blockquote>
<p><strong>docker_params</strong>: JSON array</p>
<blockquote>
<div><p>The <em>docker_params</em> field is an optional JSON array of objects that describe each Docker parameter to pass to
the container. Each Docker parameter object has the following fields:</p>
<p><strong>flag</strong>: JSON string</p>
<blockquote>
<div>The <em>flag</em> field is a required string describing the command line flag (long form) to use for passing the
parameter without the preceding dashes (e.g. use &#8220;volume&#8221; for passing &#8220;&#8211;volume=...&#8221;).</div></blockquote>
<p><strong>value</strong>: JSON string</p>
<blockquote>
<div>The <em>value</em> field is a required string describing the value to pass to the parameter on the Docker command
line.</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="recipe_definition.html" class="btn btn-neutral float-right" title="Recipe Definition" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="job_data.html" class="btn btn-neutral" title="Job Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, NGA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.4.0-snapshot',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>