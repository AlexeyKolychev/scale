

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Job Configuration &mdash; Scale 5.6.0-snapshot documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Job Data" href="job_data.html" />
    <link rel="prev" title="Job Interface" href="job_interface.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Scale
          

          
            
            <img src="../../_static/scale3-transparent-128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Command Line Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithm_integration/index.html">Algorithm Integration into Scale</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Jobs and Recipes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="batch_definition.html">Batch Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="error_interface.html">Errors Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="job_interface.html">Job Interface</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Job Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#job-configuration-specification-version-2-0">Job Configuration Specification Version 2.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#host-mount">Host Mount</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-mount">Volume Mount</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="job_data.html">Job Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="exe_configuration.html">Execution Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="recipe_definition.html">Recipe Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="recipe_data.html">Recipe Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="task_results.html">Task Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logs.html">ElasticSearch Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../messaging.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../port.html">Import/Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scan.html">Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strike.html">Strike</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspaces.html">Workspaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../django/index.html">Django/Code Base</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rest/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Scale</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Architecture</a> &raquo;</li>
        
          <li><a href="index.html">Jobs and Recipes</a> &raquo;</li>
        
      <li>Job Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/architecture/jobs/job_configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="job-configuration">
<span id="architecture-jobs-job-configuration"></span><h1>Job Configuration<a class="headerlink" href="#job-configuration" title="Permalink to this headline">¶</a></h1>
<p>The job configuration is a JSON document that provides a user-defined configuration for running a job.</p>
<p><strong>Example job configuration:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;mounts&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;dted&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="s2">&quot;host_path&quot;</span><span class="o">:</span> <span class="s2">&quot;/path/to/dted&quot;</span><span class="p">}</span>
   <span class="p">},</span>
   <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;DB_HOST&quot;</span><span class="o">:</span> <span class="s2">&quot;scale&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example a host mount is defined to provide a needed directory for the job&#8217;s algorithm (called &#8220;dted&#8221; in the
job&#8217;s interface). <em>DB_HOST</em> is the name for a setting that will be added to the job_task of the
<a class="reference internal" href="exe_configuration.html#architecture-jobs-exe-configuration"><span class="std std-ref">Execution Configuration</span></a> as a setting when a job is scheduled, along with the value that follows.</p>
<div class="section" id="job-configuration-specification-version-2-0">
<span id="architecture-jobs-job-configuration-spec"></span><h2>Job Configuration Specification Version 2.0<a class="headerlink" href="#job-configuration-specification-version-2-0" title="Permalink to this headline">¶</a></h2>
<p>A valid job configuration is a JSON document with the following structure:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span>
   <span class="s2">&quot;mounts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="s2">&quot;host_path&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">},</span>
              <span class="nx">STRING</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="s2">&quot;driver&quot;</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">,</span> <span class="s2">&quot;driver_opts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">}}},</span>
   <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">STRING</span><span class="o">:</span> <span class="nx">STRING</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>version</strong>: JSON string</p>
<blockquote>
<div><p>The <em>version</em> is an optional string value that defines the version of the configuration specification used. This
allows updates to be made to the specification while maintaining backwards compatibility by allowing Scale to
recognize an older version and convert it to the current version. The default value for <em>version</em> if it is not
included is the latest version, which is currently 2.0.</p>
<p>Scale must recognize the version number as valid for the job type to work. Currently, the only valid job
configuration versions are <code class="docutils literal"><span class="pre">&quot;1.0&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;2.0&quot;</span></code>.</p>
</div></blockquote>
<p><strong>mounts</strong>: JSON object</p>
<blockquote>
<div><p>The <em>mounts</em> field is a JSON object that contains the mount names and their configuration as key/value pairs. Each
mount configuration is its own JSON object with the following fields:</p>
<p><strong>type</strong>: JSON string</p>
<blockquote>
<div><p>The <em>type</em> is a required string that specifies the type of mount to use. The other fields that configure
the mount are based upon the <em>type</em> field. The valid mount types are:</p>
<p><strong>host</strong></p>
<blockquote>
<div>A &#8220;host&#8221; mount mounts a local directory from the host into the job&#8217;s container. Usually this local directory
is a shared file system that has been mounted onto the host.</div></blockquote>
<p><strong>volume</strong></p>
<blockquote>
<div>A &#8220;volume&#8221; mount uses a created Docker volume to mount into the job&#8217;s container, typically specifying a
driver that provides access to some type of shared network file system.</div></blockquote>
<p>Additional mount fields may be required depending on the type of mount selected. See below for more
information on each mount type.</p>
</div></blockquote>
</div></blockquote>
<p><strong>settings</strong>: JSON object</p>
<blockquote>
<div>The <em>settings</em> is a JSON object that contains the setting names and their values as key/value pairs.</div></blockquote>
</div>
<div class="section" id="host-mount">
<h2>Host Mount<a class="headerlink" href="#host-mount" title="Permalink to this headline">¶</a></h2>
<p>The host mount mounts a local directory from the host into the job&#8217;s container. This local directory should be a shared
file system that has been mounted onto all hosts in the cluster. All hosts must have the same shared file system mounted
at the same location for this mount to work properly.</p>
<p><strong>Security</strong></p>
<p>There are potential security risks involved with mounting a host directory into a Docker container. Please consult the
Docker documentation for more information.</p>
<p>Example host mount configuration:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;mounts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;my-mount&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="s2">&quot;host_path&quot;</span><span class="o">:</span> <span class="s2">&quot;/the/host/path&quot;</span><span class="p">}}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The host mount requires one additional field in its configuration:</p>
<p><strong>host_path</strong>: JSON string</p>
<blockquote>
<div>The <em>host_path</em> is a required string that specifies the absolute path of the host&#8217;s local directory that should be
mounted into the job&#8217;s container.</div></blockquote>
</div>
<div class="section" id="volume-mount">
<h2>Volume Mount<a class="headerlink" href="#volume-mount" title="Permalink to this headline">¶</a></h2>
<p>The volume mount creates a new named Docker volume and mounts it into the job&#8217;s container.</p>
<p>Example volume mount configuration:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;mounts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;my-mount&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="s2">&quot;driver&quot;</span><span class="o">:</span> <span class="s2">&quot;my-driver&quot;</span><span class="p">,</span> <span class="s2">&quot;driver_opts&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}}}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The volume mount uses these additional fields in its configuration:</p>
<p><strong>driver</strong>: JSON string</p>
<blockquote>
<div>The <em>driver</em> is an optional string that specifies the Docker volume driver to use.</div></blockquote>
<p><strong>driver_opts</strong>: JSON object</p>
<blockquote>
<div>The <em>driver_opts</em> is an optional object that specifies the Docker driver options to use as key/value pairs.
<strong>Note:</strong> The <em>driver_opts</em> object is NOT stored and transmitted securely, so do not include driver options that
require secure storage and authorized access (such as passwords).</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="job_data.html" class="btn btn-neutral float-right" title="Job Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="job_interface.html" class="btn btn-neutral" title="Job Interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, NGA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.6.0-snapshot',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>