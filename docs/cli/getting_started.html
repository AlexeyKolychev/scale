

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating New Job Types &mdash; Scale 5.0.0-snapshot documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Scale 5.0.0-snapshot documentation" href="../index.html"/>
        <link rel="up" title="Command Line Client" href="index.html"/>
        <link rel="next" title="Algorithm Integration into Scale" href="../algorithm_integration/index.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Scale
          

          
            
            <img src="../_static/scale3-transparent-128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Command Line Client</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating New Job Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../algorithm_integration/index.html">Algorithm Integration into Scale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Scale</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Command Line Client</a> &raquo;</li>
        
      <li>Creating New Job Types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/cli/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-new-job-types">
<span id="cli-getting-started"></span><h1>Creating New Job Types<a class="headerlink" href="#creating-new-job-types" title="Permalink to this headline">Â¶</a></h1>
<p>A key feature of the command line client (cli) is the ability to creatae new job types from existing configurations
or templates. New templates can be specified or defaults can be used. Make sure you have your <cite>url</cite> and <cite>registry</cite>
values configured in <cite>~/.scaleconfig</cite> (see <a class="reference internal" href="overview.html#cli-overview"><span class="std std-ref">Overview</span></a>) To create a new job type from the default template:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">goscale</span> <span class="n">jobs</span> <span class="n">init</span> <span class="o">-</span><span class="n">a</span> <span class="n">baseimage</span><span class="o">=</span><span class="n">alpine</span> <span class="o">-</span><span class="n">a</span> <span class="n">maintainer</span><span class="o">=</span><span class="s2">&quot;My Name&quot;</span> <span class="o">-</span><span class="n">a</span> <span class="n">name</span><span class="o">=</span><span class="n">MyJob</span> <span class="o">-</span><span class="n">a</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;MyJob will get the job done&quot;</span> <span class="o">-</span><span class="n">a</span> <span class="n">image_name</span><span class="o">=</span><span class="s2">&quot;myjob_v1&quot;</span> <span class="n">myjob</span>
<span class="mi">2</span> <span class="o">&gt;</span> <span class="n">cd</span> <span class="n">myjob</span>
<span class="mi">3</span> <span class="o">&gt;</span> <span class="n">goscale</span> <span class="n">jobs</span> <span class="n">validate</span>
<span class="mi">4</span> <span class="o">&gt;</span> <span class="n">goscale</span> <span class="n">jobs</span> <span class="n">commit</span> <span class="o">-</span><span class="n">p</span>
<span class="mi">5</span> <span class="o">&gt;</span> <span class="n">goscale</span> <span class="n">jobs</span> <span class="n">deploy</span>
</pre></div>
</div>
<p>Line 1 initializes the job type from the default template. <cite>-a</cite> specifies template substitutions supported in the default
template. The next step is to edit the files, especially <cite>Dockerfile</cite>, <cite>entryPoint.sh</cite>, and <cite>job_type.yml</cite> to configure
your job type.</p>
<p>Line 3 validates the <cite>job_type.yml</cite> and prints warnings if there are any found.</p>
<p>Line 4 embeds the job type JSON data in the <cite>Dockerfile</cite>, builds the docker image and pushes it to the docker registry.
Remove the <cite>-p</cite> to avoid pushing to the registry.</p>
<p>Line 5 attempts to pull the docker image to ensure it is up-to-date, extracts the job_type JSON from the image metadata,
and submits it to scale. If the job type does not currently exist, it will be created. If it exists and the job_type JSON
specifies a different version, the job type will be updated. If the job type exists and the version is the same, nothing will
happen.</p>
<p>Once the new job type is registered with scale, you can run it from the cli if there is no automatic ingest trigger
configured. You need to create a job data file (JSON or YAML) as described in <a class="reference internal" href="../architecture/jobs/job_data.html#architecture-jobs-job-data"><span class="std std-ref">Job Data</span></a>.
You can specify a job type name or job type ID to execute a job.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">goscale</span> <span class="n">jobs</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="n">job_data</span><span class="o">.</span><span class="n">yml</span> <span class="n">MyJob</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../algorithm_integration/index.html" class="btn btn-neutral float-right" title="Algorithm Integration into Scale" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, NGA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.0.0-snapshot',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>